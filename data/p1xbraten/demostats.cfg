recordnextdemostats = [
    demostart = [
        intermission = [
            local fname client potentials dealts
            fname = (format "%1.csv" $demofilename)
            appendline $fname "cn,chainsaw potential,shotgun potential,minigun potential,rockets potenial,rifle potential,grenades potential,pistol potential,chainsaw damage dealt,shotgun damage dealt,minigun damage dealt,rockets potenial,rifle damage dealt,grenades damage dealt,pistol damage dealt"
            looplist client (listclients 0 0 0) [
                potentials = (format "%1,%2,%3,%4,%5,%6,%7" (getdamagepotential $client 0) (getdamagepotential $client 1) (getdamagepotential $client 2) (getdamagepotential $client 3) (getdamagepotential $client 4) (getdamagepotential $client 5) (getdamagepotential $client 6) (getdamagepotential $client 7))
                dealts = (format "%1,%2,%3,%4,%5,%6,%7" (getdamagedealt $client 0) (getdamagedealt $client 1) (getdamagedealt $client 2) (getdamagedealt $client 3) (getdamagedealt $client 4) (getdamagedealt $client 5) (getdamagedealt $client 6) (getdamagedealt $client 7))
                appendline $fname (format "%1,%2,%3" $client $potentials $dealts)
            ]
        ]
        sleep 100 [ seekdemo "-0:00" ]
    ]
    demoend = [
        intermission = []
        demostart = []
        demoend = []
    ]
]

demostats = [
    recordnextdemostats
    demo $arg1
]
varcomplete demostats demodir dmo